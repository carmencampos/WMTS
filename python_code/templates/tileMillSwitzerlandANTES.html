%rebase layout

<!-- Map -->
<script src="/assets/js/switzerlandLL_handler.js"></script>

<div class="container">
    <section>
<div>
<p class="text">In this document is showed how to use TileMill to create a base layer with real information about Switzerland. The first steps about how to create the project and start the map are the same than in the example.</p>
<p class="text">It will be useful to take a look to TileMill CartoCSS reference. It is accessible by clicking the {} button, and there is an online CartoCSS reference by MapBox</p>
<p class="text">Once we have the map, we add the layers. As it is explained in the initial example, we click in the appropriate button and we select the datasource path. We could change the id that appears by default and we can add a class, to write the css.</p>
<img src="images/pict1m.jpg" alt="Order layers">

<p class="text">Once we have added the datasource of the layer, we can choose if we want a style file to be generated by default. In this case, the style will be the necessary to show the data of the layer in the map. To do that, we press the “Save & Style” button</p>
<p class="text">If we prefer to generate our own style, we just press the “Save” button.</p>
<p class="text">There are different kinds of layers, which will we treat differently when we write the necessary css:</p>

<p class="text">A point is a single 'spot' in space. It has no dimension, i.e. no length, width, or height. Points are typically defined by a set of coordinates, also known as a coordinate tuple.</p>
<p class="text">A line is built of points. A sequence of points will form a line, or linestring.</p>
<p class="text">A polygon is similar to a line, except that its start and end points are the same. In effect, polygons are closed loops. Polygons form an area, and can have loops cut out of them.</p>

<ul class="text"><li>linestring: the only css code we need is the color in which we want to show it   ::outline { line-color: #800080; }</li>
<li>polygon: the css code we need is the color in which we want to show the border and the inside    ::outline { line-color: #00CED1; }      ::fill { polygon-fill: #00CED1; }</li>
<li>point: the css code we need is the color in which we want to show marker-fill: #FFFF00;   and we can change the size of the point     marker-width: 3;</li></ul>

<p class="text">We can also add a layer using a SQLite databases as geographic datasource. SQLite files can be edited with any SQLite client, including free GIS tools like Quantum GIS</p>
<p class="text">SQLite files are an ideal alternative to shapefiles because they consist of just one file, making them very easy to share, and just like shapefiles, SQLite databases can store geographic features along with non-geographic attributes about those features.</p>
<p class="text">To create the SQLite database using Quantum GIS we need a shapefile with our data. For example, to create a database with the streets in Switzerland we need a folder containing the .dbf, .prj, .shp, .xml and .shx files about the streets in Switzerland. Once we have our shapefile, we just need to add the folder in Quantum GIS, just drag it to the Layers window.</p>
<img src="images/qgis1.jpg" alt="shapefile database in QGIS">

<p class="text">Right-click on our layer named Strassen within the Layers window and click “Save As…” . Select SQLite for the Format, and enter the  name. You can browse to select the directory to save the file</p>
<p class="text">Once in TileMill, we click “Add layer” and we change the add layer type to SQLite. In datasource we have to add the .sqlite file we have just created.</p>
<img src="images/qgis2.jpg" alt="add shapefile database to TileMill">

<p class="text">For the Table or subquery field, enter (SELECT * from streets). This is a query to select the data from table streets within your SQLite database. This field acts as a subquery so the information must be entered in a subquery fashion.</p>
<p class="text">Select the Spatial Reference System (SRS) for your feature. This will be the projection your data is. TileMill can often autodetect this value. But it can also be obtained from http://spatialreference.org/</p>
<p class="text">At this point, you can already click the “Save & Style” to add your layer with the default CartoCSS settings and preview the result.</p>
<p class="text">The real power of having SQLite in TileMill is the ability to join two or more SQLite databases together. This feature allows you supplement your geographic data with data from other sources and use it in your stylesheets and tooltips.</p>
<p class="text">When joining multiple SQLite files, you will have one database that contains feature geometries and additional database can add more attributes about those features. To complete the join, the databases need to share a common key or ID.</p>
<p class="text">We can edit the previous layer to add a join query to another database. In order to do that, in the “Attach DB” field we write where our second .sqlite database is stored. And into the “Table or subquery” field we could put something like this:
(SELECT * FROM streets JOIN cities on streets.id = cities.id && cities.id=7)
</p>

<p class="text">When we have finished writing the css code for very layer, we could add a teaser or a full to show some extra information about a layer.</p>
<img src="images/pict2m.jpg" alt="Add legend">
<p class="text">The final step will be to export as mbtiles. Remember not to choose to many zoom levels or the size of the map will be too big. You can also restrict the part of the world that is going to be show to Switzerland and a little bit around it.</p>
</div>
    </section>
</div>